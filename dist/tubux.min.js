/*!
 * Tubux v1.0.1
 * https://github.com/thomasperi/tubux#readme
 * Thomas Peri <hello@thomasperi.net>
 * MIT License
 */
!function(n){!function(n,t){"use strict";var e,i,r,o="$$",u="hasOwnProperty",c="noConflict",f="object",s="function"==typeof define&&define,a=typeof exports===f&&exports,l=typeof module===f&&module;s&&s.amd&&typeof s.amd===f?define([],n):l&&a===t&&a===l.exports?module.exports=n():((r=t[u](o))&&(i=t.$$),t.$$=e=n(),e[u](c)||(e[c]=function(){return r?t.$$=i:delete t.$$,e[c]=function(){return e},e}))}((function(){"use strict";var n="this accessor is write-only",t="this accessor is read-only",e="this accessor is required",i="this flag is only available after applying the .accessor() flag",r="assigning $$(...) values to the prototype is not allowed",o="hasOwnProperty",u="prototype",c="indexOf",f=null,s={};function a(n){return new y(n)}function l(n){return R(arguments,(function(t){w(t,(function(t,e){n[t]=e}))}),1),n}function h(n,t,e){if(n[o](t))return n[t]instanceof y?n[t].t=e:n[t]=e,!0}function d(n,t,e){return w(n,(function(i,r){v(r,"accessor")?n[i]=t[i]=r.i(e,i):r instanceof y&&(n[i]=r.t)})),t}function p(n){w(n,(function(n,t){delete t.claim}))}function v(n,t){return n instanceof y&&n.o(s)[t]}function y(n){var t={};n instanceof y&&(l(t,n.o(s)),n=n.t,t.listen&&(t.listen=[].slice.call(t.listen))),l(this,{t:n,o:function(n){if(n===s)return t}})}function O(n,t){return function(e){t&&t.call(this,e,n);var i=this.o(s)[n]||[];return(e=m(e))&&i[c](e)<0&&i.push(e),i}}function g(n,t){return this.o(s).accessor||b(i,t)(),n}function w(n,t){for(var e in n)n[o](e)&&t(e,n[e]);return n}function R(n,t,e){var i,r=n.length;for(i=e||0;i<r;i++)t(n[i],i);return n}function m(n){return"function"==typeof n?n:f}function b(n,t){return function(){throw{message:n,key:t}}}return l(a,{assign:l,detach:function(n,t){var e=n[t];return delete n[t],e},secret:function(n){return w(n,(function(t,e){e instanceof y||(e=n[t]=a(e)),e.secret()}))},struct:function(n){var t=(n=l({},{params:{},proto:{},statics:{},construct:f},n)).params,i=m(n.construct);function c(n){var r=this,u={},c={};n="object"==typeof n&&n||{},w(t,(function(t,i){v(i,"required")&&!n[o](t)&&b(e,t)(),i instanceof y&&(i=new y(i)),v(i,"secret")?c[t]=i:r[t]=i})),w(n,(function(n,t){h(r,n,t)||h(c,n,t)})),d(r,u,r),d(c,u,r),w(u,(function(n,t){c[o](n)&&(c[n]=t.claim())})),i&&i.call(r,c),p(u)}return w(n.proto,(function(n,t){t instanceof y&&b(r,n)()})),l(c[u],n.proto),l(c,n.statics),p(d(c,{},!1)),c},errors:{WRITEONLY:n,READONLY:t,REQUIRED:e,ACCESSORONLY:i,PROTOPROXY:r},debug:!1}),function(n,t){w(t,(function(t,e){n[t]=function(n){return arguments.length||(n=!0),this.o(s)[t]=e?e.call(this,n,t):n,this}}))}(y[u],{accessor:f,required:f,secret:f,filter:O("filter"),readonly:g,writeonly:g,listen:O("listen",g)}),y[u].i=function(e,i){var r,o=this.o(s),u=o.filter||[],f=o.readonly,a=o.writeonly,h=o.listen||[],d=b(t,i),p=b(n,i),v=f?function(){if(0===arguments.length)return r;d()}:a?function(){if(0<arguments.length)return y(arguments[0]),r;p()}:g;function y(n){u&&R(u,(function(t){t&&(n=t.call(e,n))})),O(n)}function O(n){r!==(r=n)&&w.publish()}function g(){return 0<arguments.length&&y(arguments[0]),r}var w={claim:function(){return g},publish:function(){return h&&R(h,(function(n){n&&n.call(e,r)})),this},filter:function(n){return u[c](n)<0&&(u.push(n),O(n.call(e,r))),this},listen:function(n){return h[c](n)<0&&h.push(n),this},unlisten:function(n){var t=h[c](n);return 0<=t&&h.splice(t,1),this},unfilter:function(n){var t=u[c](n);return 0<=t&&u.splice(t,1),this}};return l(v,w),l(g,w),f&&(v.filter=d),a&&(v.filter=v.listen=p),g(this.t),delete this.t,delete this.o,v},a.debug&&console.log(void 0),a}),n)}(this);