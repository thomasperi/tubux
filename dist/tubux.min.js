/*!
 * Tubux v1.0.1
 * https://github.com/thomasperi/tubux#readme
 * Thomas Peri <hello@thomasperi.net>
 * MIT License
 */
!function(n){!function(n,t){"use strict";var e,r,i,o="$$",u="hasOwnProperty",c="noConflict",s="object",f="function"==typeof define&&define,a=typeof exports===s&&exports,l=typeof module===s&&module;f&&f.amd&&typeof f.amd===s?define([],n):l&&a===t&&a===l.exports?module.exports=n():((i=t[u](o))&&(r=t.$$),t.$$=e=n(),e[u](c)||(e[c]=function(){return i?t.$$=r:delete t.$$,e[c]=function(){return e},e}))}(function(){"use strict";var n="this accessor is write-only",t="this accessor is read-only",e="this accessor is hidden",r="this accessor is required",i="this flag is only available after applying the .accessor() flag",o="assigning $$(...) values to the prototype is not allowed",u="hasOwnProperty",c="prototype",s="function";function f(n){return new $(n)}function a(n){return g(arguments,function(t){y(t,function(t,e){n[t]=e})},1),n}function l(n){y(n,function(n,t){delete t.secret})}function d(n,t,e){if(n[u](t))return n[t]instanceof $?n[t].value=e:n[t]=e,!0}function h(n,t){return y(n,function(e,r){var i=v(r,"filter");i&&(r.value=i(r.value)),v(r,"accessor")?n[e]=t[e]=r.generate(n,e):r instanceof $&&(n[e]=r.value)}),t}function p(n){return typeof n===s?n:null}function v(n,t){return n instanceof $&&n[t].v}function y(n,t){for(var e in n)n[u](e)&&t(e,n[e]);return n}function g(n,t,e,r){var i,o=r||n.length;for(i=e||0;i<o;i++)t(n[i],i);return n}function $(n){var t=this,e=[];function r(n){return function e(){return n&&n(),e.v=!0,t}}function o(n){return function(){t.accessor.v||O(i,n)()}}a(t,{value:n,accessor:r(),required:r(),secret:r(),readonly:r(o("readonly")),writeonly:r(o("writeonly")),hidden:r(o("hidden")),filter:function(n){return t.filter.v=p(n),t},listen:function(n){return o("listen")(),e.push(p(n)),t},listeners:function(){return e}})}function O(n,t){return function(){throw{message:n,key:t}}}return a(f,{assign:a,struct:function(n){var t=(n=a({},{params:{},proto:{},statics:{},construct:null},n)).params,e=p(n.construct);function i(n){var i=this,o={},c={};n="object"==typeof n&&n||{},y(t,function(t,e){v(e,"required")&&!n[u](t)&&O(r,t)(),v(e,"secret")?c[t]=e:i[t]=e}),y(n,function(n,t){d(i,n,t)||d(c,n,t)}),h(i,o),h(c,o),y(o,function(n,t){c[u](n)&&(c[n]=t.secret())}),e&&e.call(i,c),l(o)}return y(n.proto,function(n,t){t instanceof $&&O(o,n)()}),a(i[c],n.proto),a(i,n.statics),l(h(i,{})),i},secret:function(n){return y(n,function(t,e){e instanceof $||(e=n[t]=f(e)),e.secret()})},errors:{WRITEONLY:n,READONLY:t,HIDDEN:e,REQUIRED:r,ACCESSORONLY:i,PROTOPROXY:o},debug:!1}),$[c].generate=function(r,i){var o,u=this,c=u.readonly.v,s=u.writeonly.v,f=u.hidden.v,l=!s&&!f,d=!c&&!f,h=p(u.filter.v),v=u.listeners(),y=O(e,i),$=O(t,i),w=O(n,i),m=d&&l?R:d?function(){if(0<arguments.length)return b(arguments[0]),o;w()}:l?function(){if(0===arguments.length)return o;$()}:function(){y()};function b(n){o!==(o=h?h(n):n)&&x.publish()}function R(){return 0<arguments.length&&b(arguments[0]),o}var x={secret:function(){return R},publish:function(){return g(v,function(n){n&&n.call(r,o)}),this},filter:function(n){return h=p(n),R(o),this},listen:function(n){return v.indexOf(n)<0&&v.push(n),this},unlisten:function(n){var t=v.indexOf(n);return 0<=t&&v.splice(t,1),this}};return a(m,x),a(R,x),d&&l||(m.filter=l?$:d?w:y),l||(m.listen=d?w:y),R(this.value),m},f.debug&&console.log(void 0),f},n)}(this);