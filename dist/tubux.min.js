/*!
 * Tubux v1.0.1
 * https://github.com/thomasperi/tubux#readme
 * Thomas Peri <hello@thomasperi.net>
 * MIT License
 */
!function(n){!function(n,t){"use strict";var e,i,r,o="$$",u="hasOwnProperty",c="noConflict",s="object",f="function"==typeof define&&define,l=typeof exports===s&&exports,a=typeof module===s&&module;f&&f.amd&&typeof f.amd===s?define([],n):a&&l===t&&l===a.exports?module.exports=n():((r=t[u](o))&&(i=t.$$),t.$$=e=n(),e[u](c)||(e[c]=function(){return r?t.$$=i:delete t.$$,e[c]=function(){return e},e}))}(function(){"use strict";var n="this accessor is write-only",t="this accessor is read-only",e="this accessor is required",i="this flag is only available after applying the .accessor() flag",r="assigning $$(...) values to the prototype is not allowed",o="hasOwnProperty",u="prototype",c="function",s="indexOf",f=null,l={};function a(n){return new g(n)}function h(n){return O(arguments,function(t){m(t,function(t,e){n[t]=e})},1),n}function p(n,t,e){if(n[o](t))return n[t]instanceof g?n[t]._value=e:n[t]=e,!0}function d(n,t,e){return m(n,function(i,r){y(r,"accessor")?n[i]=t[i]=r.generate(e,i):r instanceof g&&(n[i]=r._value)}),t}function v(n){m(n,function(n,t){delete t.claim})}function y(n,t){return n instanceof g&&n._internals(l)[t]}function g(n){var t={};n instanceof g&&(h(t,n._internals(l)),n=n._value,t.listen&&(t.listen=[].slice.call(t.listen))),h(this,{_value:n,_internals:function(n){if(n===l)return t}})}function _(n,t){return function(e){t&&t.call(this,e,n);var i=this._internals(l)[n]||[];return(e=w(e))&&i[s](e)<0&&i.push(e),i}}function $(n,t){return this._internals(l).accessor||b(i,t)(),n}function m(n,t){for(var e in n)n[o](e)&&t(e,n[e]);return n}function O(n,t,e){var i,r=n.length;for(i=e||0;i<r;i++)t(n[i],i);return n}function w(n){return typeof n===c?n:f}function b(n,t){return function(){throw{message:n,key:t}}}return h(a,{assign:h,detach:function(n,t){var e=n[t];return delete n[t],e},secret:function(n){return m(n,function(t,e){e instanceof g||(e=n[t]=a(e)),e.secret()})},struct:function(n){var t=(n=h({},{params:{},proto:{},statics:{},construct:f},n)).params,i=w(n.construct);function c(n){var r=this,u={},c={};n="object"==typeof n&&n||{},m(t,function(t,i){y(i,"required")&&!n[o](t)&&b(e,t)(),i instanceof g&&(i=new g(i)),y(i,"secret")?c[t]=i:r[t]=i}),m(n,function(n,t){p(r,n,t)||p(c,n,t)}),d(r,u,r),d(c,u,r),m(u,function(n,t){c[o](n)&&(c[n]=t.claim())}),i&&i.call(r,c),v(u)}return m(n.proto,function(n,t){t instanceof g&&b(r,n)()}),h(c[u],n.proto),h(c,n.statics),v(d(c,{},!1)),c},errors:{WRITEONLY:n,READONLY:t,REQUIRED:e,ACCESSORONLY:i,PROTOPROXY:r},debug:!1}),function(n,t){m({accessor:f,required:f,secret:f,filter:_("filter"),readonly:$,writeonly:$,listen:_("listen",$)},function(t,e){n[t]=function(n){return arguments.length||(n=!0),this._internals(l)[t]=e?e.call(this,n,t):n,this}})}(g[u]),g[u].generate=function(e,i){var r,o=this._internals(l),u=o.filter||[],c=o.readonly,f=o.writeonly,a=o.listen||[],p=b(t,i),d=b(n,i),v=c?function(){if(0===arguments.length)return r;p()}:f?function(){if(0<arguments.length)return y(arguments[0]),r;d()}:_;function y(n){u&&O(u,function(t){t&&(n=t.call(e,n))}),g(n)}function g(n){r!==(r=n)&&$.publish()}function _(){return 0<arguments.length&&y(arguments[0]),r}var $={claim:function(){return _},publish:function(){return a&&O(a,function(n){n&&n.call(e,r)}),this},filter:function(n){return u[s](n)<0&&(u.push(n),g(n.call(e,r))),this},listen:function(n){return a[s](n)<0&&a.push(n),this},unlisten:function(n){var t=a[s](n);return 0<=t&&a.splice(t,1),this},unfilter:function(n){var t=u[s](n);return 0<=t&&u.splice(t,1),this}};return h(v,$),h(_,$),c&&(v.filter=p),f&&(v.filter=v.listen=d),_(this._value),delete this._value,delete this._internals,v},a.debug&&console.log(void 0),a},n)}(this);