/*!
 * Tubux v1.0.2+dev
 * https://github.com/thomasperi/tubux#readme
 * Thomas Peri <hello@thomasperi.net>
 * MIT License
 */
!function(n){!function(n,t){"use strict";var r,i,e,o="$$",u="hasOwnProperty",c="noConflict",f="object",s="function"==typeof define&&define,a=typeof exports===f&&exports,l=typeof module===f&&module;s&&s.amd&&typeof s.amd===f?define([],n):l&&a===t&&a===l.exports?module.exports=n():((e=t[u](o))&&(i=t.$$),t.$$=r=n(),r[u](c)||(r[c]=function(){return e?t.$$=i:delete t.$$,r[c]=function(){return r},r}))}((function(){"use strict";var n="this accessor is write-only",t="this accessor is read-only",r="this accessor is required",i="this flag is only available after applying the .accessor() flag",e="assigning $$(...) values to the prototype is not allowed",o="hasOwnProperty",u="prototype",c="indexOf",f=null;function s(n){return new y(n)}function a(n){return w(arguments,(function(t){g(t,(function(t,r){n[t]=r}))}),1),n}function l(n,t,r){if(n[o](t))return d(n[t])?n[t].t=r:n[t]=r,!0}function h(r,i,e){return g(r,(function(o,u){d(u,"accessor")?r[o]=i[o]=function(r,i,e){var o,u=r.i,f=u.readonly,s=u.writeonly,l=u.listen,h=u.filter,p=m(t,e),d=m(n,e),y=f?function(){if(!arguments.length)return o;p()}:s?function(){if(arguments.length)return v(arguments[0]),o;d()}:g;function v(n){h&&w(h,(function(t){t&&(n=t.call(i,n))})),O(n)}function O(n){o!==(o=n)&&R.publish()}function g(){return arguments.length&&v(arguments[0]),o}var R={claim:function(){return g},publish:function(){return l&&w(l,(function(n){n&&n.call(i,o)})),this},filter:function(n){return h[c](n)<0&&(h.push(n),O(n.call(i,o))),this},listen:function(n){return l[c](n)<0&&l.push(n),this},unlisten:function(n){var t=l[c](n);return t>=0&&l.splice(t,1),this},unfilter:function(n){var t=h[c](n);return t>=0&&h.splice(t,1),this}};a(y,R),a(g,R),f&&(y.filter=p);s&&(y.filter=y.listen=d);return g(r.t),y}(u,e,o):d(u)&&(r[o]=u.t)})),i}function p(n){g(n,(function(n,t){delete t.claim}))}function d(n,t){return n instanceof y&&(!t||n.i[t])}function y(n){var t={listen:[],filter:[]};d(n)&&(a(t,n.i),n=n.t,t.listen=t.listen.slice(),t.filter=t.filter.slice()),a(this,{t:n,i:t})}function v(n,t){return function(r){t&&t.call(this,r,n);var i=this.i[n];return(r=R(r))&&i[c](r)<0&&i.push(r),i}}function O(n,t){return this.i.accessor||m(i,t)(),n}function g(n,t){for(var r in n)n[o](r)&&t(r,n[r]);return n}function w(n,t,r){var i,e=n.length;for(i=r||0;i<e;i++)t(n[i],i);return n}function R(n){return"function"==typeof n?n:f}function m(n,t){return function(){throw{message:n,key:t}}}return a(s,{assign:a,secret:function(n){return g(n,(function(t,r){d(r)||(r=n[t]=s(r)),r.secret()}))},struct:function(n){var t=(n=a({},{params:{},proto:{},statics:{},construct:f},n)).params,i=R(n.construct);function c(n){var e=this,u={},c={};n="object"==typeof n&&n||{},g(t,(function(t,i){d(i,"required")&&!n[o](t)&&m(r,t)(),d(i)&&(i=new y(i)),d(i,"secret")?c[t]=i:e[t]=i})),g(n,(function(n,t){l(e,n,t)||l(c,n,t)})),h(e,u,e),h(c,u,e),g(u,(function(n,t){c[o](n)&&(c[n]=t.claim())})),i&&i.call(e,c),p(u)}return g(n.proto,(function(n,t){d(t)&&m(e,n)()})),a(c[u],n.proto),a(c,n.statics),p(h(c,{},!1)),c},errors:{WRITEONLY:n,READONLY:t,REQUIRED:r,ACCESSORONLY:i,PROTOPROXY:e},debug:!1}),function(n,t){g(t,(function(t,r){n[t]=function(n){return arguments.length||(n=!0),this.i[t]=r?r.call(this,n,t):n,this}}))}(y[u],{accessor:f,required:f,secret:f,readonly:O,writeonly:O,filter:v("filter",O),listen:v("listen",O)}),s.debug&&console.log(void 0),s}),n)}(this);