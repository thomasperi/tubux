/*!
 * Tubux v1.0.1
 * https://github.com/thomasperi/tubux#readme
 * Thomas Peri <hello@thomasperi.net>
 * MIT License
 */
!function(n){!function(n,t){"use strict";var e,i,r,o="$$",u="hasOwnProperty",s="noConflict",c="object",f="function"==typeof define&&define,l=typeof exports===c&&exports,a=typeof module===c&&module;f&&f.amd&&typeof f.amd===c?define([],n):a&&l===t&&l===a.exports?module.exports=n():((r=t[u](o))&&(i=t.$$),t.$$=e=n(),e[u](s)||(e[s]=function(){return r?t.$$=i:delete t.$$,e[s]=function(){return e},e}))}(function(){"use strict";var n="this accessor is write-only",t="this accessor is read-only",e="this accessor is required",i="this flag is only available after applying the .accessor() flag",r="assigning $$(...) values to the prototype is not allowed",o="hasOwnProperty",u="prototype",s="function",c=null,f={};function l(n){return new $(n)}function a(n){return O(arguments,function(t){g(t,function(t,e){n[t]=e})},1),n}function h(n,t,e){if(n[o](t))return n[t]instanceof $?n[t].value=e:n[t]=e,!0}function p(n,t){return g(n,function(e,i){var r=y(i,"filter");r&&(i.value=r(i.value)),y(i,"accessor")?n[e]=t[e]=i.generate(n,e):i instanceof $&&(n[e]=i.value)}),t}function d(n){g(n,function(n,t){delete t.claim})}function v(n){return typeof n===s?n:c}function y(n,t){return n instanceof $&&n.internals(f)[t]}function g(n,t){for(var e in n)n[o](e)&&t(e,n[e]);return n}function O(n,t,e,i){var r,o=i||n.length;for(r=e||0;r<o;r++)t(n[r],r);return n}function $(n){var t={};n instanceof $&&(a(t,n.internals(f)),n=n.value,t.listen&&(t.listen=[].slice.call(t.listen))),a(this,{value:n,internals:function(n){if(n===f)return t}})}function m(n,t){return this.internals(f).accessor||w(i,t)(),n}function w(n,t){return function(){throw{message:n,key:t}}}return a(l,{assign:a,struct:function(n){var t=(n=a({},{params:{},proto:{},statics:{},construct:c},n)).params,i=v(n.construct);function s(n){var r=this,u={},s={};n="object"==typeof n&&n||{},g(t,function(t,i){y(i,"required")&&!n[o](t)&&w(e,t)(),i instanceof $&&(i=new $(i)),y(i,"secret")?s[t]=i:r[t]=i}),g(n,function(n,t){h(r,n,t)||h(s,n,t)}),p(r,u),p(s,u),g(u,function(n,t){s[o](n)&&(s[n]=t.claim())}),i&&i.call(r,s),d(u)}return g(n.proto,function(n,t){t instanceof $&&w(r,n)()}),a(s[u],n.proto),a(s,n.statics),d(p(s,{})),s},secret:function(n){return g(n,function(t,e){e instanceof $||(e=n[t]=l(e)),e.secret()})},errors:{WRITEONLY:n,READONLY:t,REQUIRED:e,ACCESSORONLY:i,PROTOPROXY:r},debug:!1}),function(n,t){g(t,function(t,e){n[t]=function(n){return arguments.length||(n=!0),this.internals(f)[t]=e?e.call(this,n,t):n,this}})}($[u],{accessor:c,required:c,secret:c,filter:v,readonly:m,writeonly:m,listen:function(n){m.call(this,n,"listen");var t=this.internals(f).listen||[];return(n=v(n))&&t.indexOf(n)<0&&t.push(n),t}}),$[u].generate=function(e,i){var r,o=this.internals(f),u=o.filter,s=o.readonly,c=o.writeonly,l=o.listen||[],h=w(t,i),p=w(n,i),d=s?function(){if(0===arguments.length)return r;h()}:c?function(){if(0<arguments.length)return y(arguments[0]),r;p()}:g;function y(n){r!==(r=u?u(n):n)&&$.publish()}function g(){return 0<arguments.length&&y(arguments[0]),r}var $={claim:function(){return g},publish:function(){return l&&O(l,function(n){n&&n.call(e,r)}),this},filter:function(n){return u=v(n),g(r),this},listen:function(n){return l.indexOf(n)<0&&l.push(n),this},unlisten:function(n){var t=l.indexOf(n);return 0<=t&&l.splice(t,1),this}};return a(d,$),a(g,$),s&&(d.filter=h),c&&(d.filter=d.listen=p),g(this.value),d},l.debug&&console.log(void 0),l},n)}(this);