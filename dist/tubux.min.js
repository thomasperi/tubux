/*!
 * Tubux v1.0.1
 * https://github.com/thomasperi/tubux#readme
 * Thomas Peri <hello@thomasperi.net>
 * MIT License
 */
!function(n){!function(n,t){"use strict";var e,r,i,o="$$",u="hasOwnProperty",s="noConflict",c="object",f="function"==typeof define&&define,a=typeof exports===c&&exports,l=typeof module===c&&module;f&&f.amd&&typeof f.amd===c?define([],n):l&&a===t&&a===l.exports?module.exports=n():((i=t[u](o))&&(r=t.$$),t.$$=e=n(),e[u](s)||(e[s]=function(){return i?t.$$=r:delete t.$$,e[s]=function(){return e},e}))}(function(){"use strict";var n="this accessor is write-only",t="this accessor is read-only",e="this accessor is hidden",r="this accessor is required",i="this flag is only available after applying the .accessor() flag",o="cannot assign $$(...) values to proto",u="cannot assign $$(...) values to statics",s="hasOwnProperty",c="prototype",f="function";function a(n){return new y(n)}function l(n){return p(arguments,function(t){h(t,function(t,e){n[t]=e})},1),n}function v(n){return typeof n===f?n:null}function d(n,t){return n instanceof y&&n[t].v}function h(n,t){for(var e in n)n[s](e)&&t(e,n[e])}function p(n,t,e,r){var i,o=r||n.length;for(i=e||0;i<o;i++)t(n[i],i)}function y(n){var t=this,e=[];function r(n){return function e(){return n&&n(),e.v=!0,t}}function o(n){return function(){t.accessor.v||g(i,n)()}}l(t,{value:n,accessor:r(),required:r(),readonly:r(o("readonly")),writeonly:r(o("writeonly")),hidden:r(o("hidden")),filter:function(n){return t.filter.v=v(n),t},listen:function(n){return o("listen")(),e.push(v(n)),t},listeners:function(){return e}})}function g(n,t){return function(){throw{message:n,key:t}}}return l(a,{assign:l,struct:function(n){var t=(n=l({},{params:{},proto:{},statics:{},construct:null},n)).params,e=v(n.construct);function i(n){var i=this,o={};n="object"==typeof n&&n||{},h(t,function(t,e){d(e,"required")&&!n[s](t)&&g(r,t)(),i[t]=e}),h(n,function(n,t){i[n]instanceof y?i[n].value=t:i[n]=t}),h(i,function(n,t){var e=d(t,"filter");e&&(t.value=e(t.value)),d(t,"accessor")?i[n]=o[n]=t.generate(i,n):t instanceof y&&(i[n]=t.value)}),e&&e.call(i),h(o,function(n,t){i[n]===t&&delete i[n].priv})}return h(n.proto,function(n,t){t instanceof y&&g(o,n)()}),h(n.statics,function(n,t){t instanceof y&&g(u,n)()}),l(i[c],n.proto),l(i,n.statics),i},errors:{WRITEONLY:n,READONLY:t,HIDDEN:e,REQUIRED:r,ACCESSORONLY:i,PROTOPROXY:o,STATICPROXY:u},debug:!1}),y[c].generate=function(r,i){var o,u=this,s=u.readonly.v,c=u.writeonly.v,f=u.hidden.v,a=!c&&!f,d=!s&&!f,h=v(u.filter.v),y=u.listeners(),$=g(e,i),O=g(t,i),m=g(n,i),w=d&&a?b:d?function(){if(0<arguments.length)return R(arguments[0]),o;m()}:a?function(){if(0===arguments.length)return o;O()}:function(){$()};function R(n){o!==(o=h?h(n):n)&&x.publish()}function b(){return 0<arguments.length&&R(arguments[0]),o}var x={priv:function(){return b},publish:function(){return p(y,function(n){n&&n.call(r,o)}),this},filter:function(n){return h=v(n),b(o),this},listen:function(n){return y.indexOf(n)<0&&y.push(n),this},unlisten:function(n){var t=y.indexOf(n);return 0<=t&&y.splice(t,1),this}};return l(w,x),l(b,x),d&&a||(w.filter=a?O:d?m:$),a||(w.listen=d?m:$),b(this.value),w},a.debug&&console.log(void 0),a},n)}(this);